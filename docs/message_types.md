# Netrek Web Message Type Taxonomy

This document catalogs the different types of messages used in the Netrek Web game for proper routing in the user interface.

## Message Categories

Messages in Netrek Web are broadly divided into two categories:

1. **Player-to-player chat messages**: These are messages typed by players to communicate with each other.
2. **Server-generated event messages**: These are messages generated by the server to inform players about game events.

## Message Types

### Player Chat Messages
These should always appear in the PLAYER MESSAGES panel:

- `all`: Public messages sent to all players
- `team`: Team-only messages visible to teammates only
- `private`: Private messages between two specific players

### Server Event Messages
These should always appear in the SERVER MESSAGES panel:

- `kill`: Death notifications when a player is killed by another player or game object
- `info`: General game information (planet captures, etc.)
- `warning`: Warning messages to the player
- `error`: Error messages (rare)
- `death`: Specific death notifications
- *(No type)*: Default server messages (no explicit type specified)

## Message Fields

Server messages have the following structure:
```json
{
  "type": "message",
  "data": {
    "text": "The message text",
    "type": "all|team|private|kill|info|warning|error|death",
    "from": 5,  // Optional: player ID of sender (for player messages or attributed server messages)
    "team": 4,  // Optional: team ID for team messages
    "to": 3     // Optional: player ID of recipient for private messages
  }
}
```

## Routing Logic

The presence of a `from` field does not always indicate a player message. Some server-generated messages (like kill messages) include a `from` field to attribute an action to a specific player.

The correct way to route messages is to check the `type` field:
- If `type` is one of `all`, `team`, or `private`, route to PLAYER MESSAGES panel.
- Otherwise, route to SERVER MESSAGES panel.